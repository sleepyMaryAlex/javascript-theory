# ?HTTP status codes

Код состояния HTTP (англ. _HTTP status code_) — это трёхзначное число, с которого начинается любой ответ сервера на запрос по протоколу HTTP. Код кратко сообщает суть ответа — был ли выполнен запрос или возникла ошибка.

В зависимости от кода ответа посетитель либо будет видеть содержимое страницы или результаты какого-то действия, либо не будет. Например код ответа `200` будет значить, что всё хорошо и сервер отправит контент, а код `403` будет значить, что доступ к контенту запрещён и сервер ничего не отправит.

Определённые коды могут указывать на проблемы в работе сервера и влиять на SEO-продвижение сайта.

Коды ответов HTTP делятся на пять классов. В каждом из них объединены сообщения с похожими значениями. Вот краткие описания каждого из классов:

* `1хх` — информационные коды. Сообщают о прогрессе выполнения запроса. На практике практически не встречаются.
* `2хх` — коды успешно выполненных запросов. Сообщают о том, что всё в порядке и работает, как ожидалось.
* `3хх` — коды перенаправлений. Сообщают о том, что запрашиваемая страница переехала и нужно сделать ещё один запрос по новому URL.
* `4хх` — коды ошибок клиента. Сообщают об ошибке на стороне пользователя, который отправил запрос.
* `5хх` — коды ошибок сервера. Сообщают об ошибке на стороне сервера, который обрабатывал запрос.

В каждом классе есть разное количество HTTP кодов и все они предназначены для своей ситуации.

### Как разные HTTP коды влияют на SEO

_SEO_ расшифровывается как «поисковая оптимизация». Проще говоря, SEO означает процесс улучшения вашего веб-сайта, чтобы повысить его видимость в Google, Microsoft Bing и других поисковых системах.

Поисковые роботы тоже понимают коды состояния HTTP. Коды классов `1хх` и `2хх` никак не отразятся на позициях страницы в результатах поиска, а коды классов `3хх`, `4хх` и `5хх` отразятся, но в зависимости от класса по-разному.

HTTP коды класса `3хх` это коды перенаправлений с одной страницы на другую. Есть постоянные перенаправления (`301` и `308`), которые передают позиции старой страницы на новую. А есть временные (`302`, `303` и `307`), которые не передают позиции. Но если временный редирект будет стоять слишком долго, Google подумает, что владелец сайта поставил его по ошибке, и начнёт воспринимать такой редирект как постоянный.

HTTP коды классов `4хх` и `5хх` это коды ошибок. Не все, но многие из них негативно влияют на позиции страницы в результатах поиска. Обычно, когда бот заходит на страницу и видит там коды ошибки HTTP в любом из этих классов, он пробует зайти на неё ещё раз в пределах суток, рассчитывая на то, что владелец сайта решит проблему. Если ошибка возникает и при повторном посещении, бот может исключить страницу из индекса.

### Список кодов состояния HTTP с описаниями

#### `1хх` Informational — информационные коды

* HTTP `100` _Continue_ — «Продолжить». Означает, что сервер получил начальную часть запроса и готов принять остальную его часть. Отправляется при наличии в запросе заголовка Expect.
* HTTP `101` _Switching Protocols_ — «Переключить протокол». Означает, что сервер меняет протокол. Отправляется при наличии в запросе заголовка Upgrade.
* HTTP `103` _Early Hints_ — «Предварительные данные». Предварительный ответ с частью заголовков. Используется, когда сервер не может быстро сформировать все заголовки. Их полный список будет присутствовать в окончательном ответе.

#### `2xx` Success — коды успешно выполненных запросов

* HTTP `200` _OK_ — «Успешно». Сервер успешно обработал запрос.
* HTTP `201` _Created_ — «Создано». Сервер успешно обработал запрос и создал новый ресурс. 
* HTTP `202` _Accepted_ — «Принято». Сервер начал обрабатывать запрос, но пока ещё не закончил процесс. В конечном итоге обработка запроса может как завершиться, так и не завершиться.
* HTTP `203` _Non-Authoritative Information_ — «Неофициальная информация». Сервер успешно обработал запрос, но прокси, через который проходил ответ на запрос, изменил этот ответ.
* HTTP `204` _No Content_ — «Нет содержимого». Сервер успешно обработал запрос, но кроме заголовков ответа нет содержимого, которое можно было бы отправить в ответ.
* HTTP `205` _Reset Content_ — «Сбросить содержимое». Сервер успешно обработал запрос и отправил в ответ команду сбросить данные, которые пользователь ввёл, перед тем как отправить запрос.
* HTTP `206` _Partial Content_ — «Частичное содержимое». Сервер успешно обработал частичный запрос и отправил содержимое, указанное в заголовке Content-Range. Используется, например, для возобновления поставленной на паузу загрузки.
* HTTP `207` _Multi-Status_ — «Мульти-статус». В результатах запроса есть информация о нескольких независимых друг от друга операциях.

#### `3xx` Redirection — коды перенаправлений

* HTTP `300` _Multiple Choices_ — «Множественный выбор». Сервер присылает такой код, когда есть несколько возможных ответов на запрос. Например, на сервере есть несколько типов файлов, которые отвечают условиям запроса. Пользователь или user-agent должен выбрать один из вариантов. 
* HTTP `301` _Moved Permanently_ — «Перемещено навсегда». Запрашиваемый ресурс теперь доступен по новому URI и при последующих запросах стоит использовать именно его.
* HTTP `302` _Found_ — «Найдено». Раньше этот код назывался `302` _Moved Temporarily_ — «Перещено временно». Запрашиваемый ресурс временно доступен по другому URI и при последующих запросах стоит использовать старый URI.
* HTTP `303` _See Other_ — «Смотри в другом месте». Запрашиваемый ресурс нужно искать по другому URI с методом запроса GET, несмотря на то, что в изначальном запросе мог быть другой метод.
* HTTP `304` _Not Modified_ — «Не изменено». Запрашиваемый ресурс не был изменён, поэтому стоит использовать его кэшированную версию.
* HTTP `305` _Use Proxy_ — «Используй прокси». Запрос к ресурсу должен осуществляться через прокси. Этот код больше не используется.
* HTTP `306` _Switch Proxy_ — «Зарезервировано». Запрос к ресурсу должен осуществляться через прокси, который сервер указал в заголовках ответа. Этот код больше не используется.
* HTTP `307` _Temporary Redirect_ — «Временное перенаправление». Запрашиваемый ресурс временно доступен по другому URI. При запросе к новому URI клиент ОБЯЗАН использовать тот же метод, что и при изначальном запросе. Этот код имеет такую же логику, что и 302 Found. Его ввели, потому что при `302` HTTP коде некоторые клиенты меняли тип запроса.
* HTTP `308` _Permanent Redirect_  — «Постоянный редирект». У запрашиваемого ресурса навсегда изменился URI и во всех следующих запросах стоит обращаться к нему. Этот код похож на 301 Moved Permanently, но в случае с кодом `308` нельзя менять тип запроса с POST на GET.

#### `4xx` Client Error — коды ошибок клиента

* HTTP `400` _Bad Request_ — «Неверный запрос». Сервер не может обработать запрос, потому что не понимает его. Например, из-за синтаксической ошибки.
* HTTP `401` _Unauthorized_ — «Неавторизованно». Сервер не может обработать запрос без аутентификации. Нужно добавить в заголовок запроса поле Authorization или проверить правильность данных в этом поле, если оно уже присутствует.
* HTTP `402` _Payment Required_ — «Необходима оплата». Изначально этот код должен был использоваться в платёжных системах. Сейчас он не используется.
* HTTP `403` _Forbidden_ — «Запрещено». Сервер отказывается обработать запрос, потому что у пользователя нет прав на просмотр содержимого.
* HTTP `404` _Not Found_ — «Не найдено». Сервер не может найти запрашиваемый ресурс. 
* HTTP `405` _Method Not Allowed_ — «Метод запрещён». Указанный в запросе метод нельзя использовать. Сервер ОБЯЗАН указать доступные методы в заголовке Allow.
* HTTP `406` _Not Acceptable_ — «Неприемлемо». На сервере нет контента, который отвечает указанным в заголовках запроса характеристикам.
* HTTP `407` _Proxy Authentication Required_ — «Необходима аутентификация для прокси». У этого кода такая же логика, что и у `401` Unauthorized, но в этом случае клиент должен авторизоваться для использования прокси.
* HTTP `408` _Request Timeout_ — «Истекло время ожидания ответа на запрос». Сервер не получил запрос полностью в течение максимально допустимого для этого времени. Такой код может возникнуть при передаче данных большого объёма методом PUT или POST.
* HTTP `409` _Conflict_ — «Конфликт». Сервер не смог обработать запрос из-за того что содержимое этого запроса вступило в конфликт с параметрами сервера. Такое может случиться, если два клиента одновременно пытаются изменить ресурс при помощи метода PUT.
* HTTP `410` _Gone_ — «Удалено». Запрос не может быть обработан, потому что ресурс был удалён. Новое расположение ресурса при этом неизвестно.
* HTTP `411` _Length Required_ — «Требуется значение заголовка Content-Length». Сервер отказывается обрабатывать запрос, пока в его заголовках не будет указано значение в поле Content-Length.
* HTTP `412` _Precondition Failed_ — «Невыполнимые условия запроса». Сервер не может обработать запрос, потому что в его заголовках указано условие, которое не может быть выполнено.
* HTTP `413` _Payload Too Large_ — «Слишком большое тело запроса». Тело запроса превышает максимально допустимый размер, который сервер может принять.
* HTTP `414` _URI Too Long_ — «Слишком длинный URI». URI превышает максимально допустимую длину. Такое может случиться, если выбран неправильный метод (GET вместо POST).
* HTTP `415` _Unsupported Media Type_ — «Неподдерживаемый медиа формат данных». Сервер отказывается обработать запрос, потому что его содержимое содержит данные в недопустимом для такого метода формате.
* HTTP `416` _Range Not Satisfiable_ — «Диапазон не может быть выполнен». В поле Range указан недопустимый для ресурса диапазон.
* HTTP `417` _Expectation Failed_ — «Недопустимое значение поля Expect». Сервер не может выполнить условие в поле Expect в заголовках запроса.
* HTTP `418` _I’m a teapot_ — «Я чайник». Сообщение, которое должен отправлять чайник для заварки чая, если на нём пытаются заварить кофе. Этот код ошибки был введён в качестве первоапрельской шутки в 1998 году.
* HTTP `422` _Unprocessable Entity_ — «Необрабатываемый запрос». Синтаксис запроса правильный, но из-за логической ошибки сервер не может его выполнить. Такой код ошибки может возникнуть, если запрос содержит XML-документ с логической ошибкой.
* HTTP `423` _Locked_ — «Заблокировано». Запрашиваемый ресурс заблокирован для запросов с таким методом.
* HTTP `424` _Failed Dependency_ — «Невыполненная зависимость». Сервер не смог выполнить запрос, потому что запрашиваемое в нём действие зависело от другого действия, и оно не сработало.
* HTTP `426` _Upgrade Required_ — «Необходимо обновить протокол». Сервер отказывается обрабатывать запрос, используя текущий протокол, но может сделать это после перехода на его другую версию. Сервер ОБЯЗАН указать в заголовках ответа требуемую версию протокола в поле Upgrade.
* HTTP `499` _Client Closed Request_ — «Клиент отозвал запрос». Нестандартный код для Nginx, чтобы обозначить ситуацию, в которой клиент закрыл соединение, пока Nginx обрабатывал запрос.

#### `5xx` Server Error — коды ошибок сервера

* HTTP `500` _Internal Server Error_ — «Внутренняя ошибка сервера». Сервер столкнулся с непредвиденной ошибкой во время обработки запроса.
* HTTP `501` _Not Implemented_ — «Не реализовано». Сервер не поддерживает функционал, который необходим для обработки запроса.
* HTTP `502` _Bad Gateway_ — «Неверный шлюз». Сервер получил некорректный ответ от вышестоящего сервера.
* HTTP `503` _Service Unavailable_ — «Сервис недоступен». Сервер недоступен, потому что перегружен или на нём проводятся технические работы.
* HTTP `504` _Gateway Timeout_ — «Шлюз не отвечает». Сервер не получил своевременного ответа от вышестоящего сервера и закрыл соединение.
* HTTP `505` _HTTP Version Not Supported_ — «Версия HTTP не поддерживается». Сервер не поддерживает версию HTTP, которая указана в заголовках запроса.
* HTTP `507` _Insufficient Storage_ — «Недостаточно места». Сервер не может выполнить запрос, потому что на нём недостаточно свободного места, чтобы сохранить необходимые для выполнения запроса данные.
* HTTP `508` _Loop Detected_ — «Обнаружено бесконечное перенаправление». Сервер отменил выполнение операции, поскольку обнаружил бесконечный редирект при обработке запроса с параметром Depth: infinity.
* HTTP `509` _Bandwidth Limit Exceeded_ — «Исчерпана пропускная способность канала». Сайт исчерпал лимит по использованию трафика на хостинге. Этот код ошибки HTTP не описан в RFC и единственное ПО, которое его использует, это модуль bw/limited, который входит в панель управления хостингом cPanel.
