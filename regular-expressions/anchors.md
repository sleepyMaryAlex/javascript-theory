# ?Anchors

### Якоря: начало строки `^` и конец `$`

Каретка `^` означает совпадение с началом текста, а доллар `$` – с концом.

К примеру, давайте проверим начинается ли текст с `Mary`:

~~~
const str = "Mary had a little lamb";
console.log(/^Mary/.test(str)); // true
~~~

Аналогично можно проверить, кончается ли строка словом `snow` при помощи `snow$`:

~~~
const str = "it's fleece was white as snow";
console.log(/snow$/.test(str)); // true
~~~

В конкретно этих случаях мы могли бы использовать и методы строк `startsWith`/`endsWith`. Регулярные выражения следует применять, когда нужна проверка сложнее.

### Проверка на полное совпадение

Оба якоря вместе `^...$` часто используются для проверки, совпадает ли строка с шаблоном полностью. Например, чтобы определить, в правильном ли формате пользователь ввёл данные.

~~~
const goodInput = "12:34";
const badInput = "12:345";

const regexp = /^\d\d:\d\d$/;
console.log(regexp.test(goodInput)); // true
console.log(regexp.test(badInput)); // false
~~~

Якоря `^` и `$` не добавляют к результату поиска символы, а только заставляют движок регулярных выражений проверять условие (начало/конец текста).

### Многострочный режим якорей `^` `$`, флаг `"m"`

Многострочный режим включается флагом `m`. Он влияет только на поведение `^` и `$`.

В многострочном режиме они означают не только начало/конец текста, но и начало/конец каждой строки в тексте.

«Начало строки», формально, означает «сразу после перевода строки», то есть проверка `^` в многострочном режиме верна на всех позициях, которым предшествует символ перевода строки `\n` и в начале текста.

~~~
const str = `1st place
2st place
3st place`;

console.log(str.match(/^\d/gm)); // ['1', '2', '3']
~~~

Символ доллара `$` ведёт себя аналогично.

~~~
const str = `Place: 1
Place: 2
Place: 3`;

console.log(str.match(/\d$/gm)); // ['1', '2', '3']
~~~

Без флага `m` якорь `$` обозначал бы конец всей строки, и была бы найдена только последняя цифра.

Для того, чтобы найти конец строки также можно использовать символ перевода строки `\n`.

В чём разница? Давайте посмотрим на примере.

~~~
const str = `Place: 1
Place: 2
Place: 3`;

console.log(str.match(/\d\n/g));
/*
['1
', '2
']
*/
~~~

Как видим, совпадений теперь два, а не три.

Это потому, что после `3` нет перевода строки (а конец текста, подходящий под `$` – есть).

Ещё одно отличие: `\n` – символ и входит в результат.

Так что `\n` в шаблоне используется, когда нам нужен сам символ перевода строки в результате, а якоря – когда хотим найти что-то в начале/конце строки.
